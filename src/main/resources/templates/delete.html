<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickBook</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f6e2b8;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: white;
            color: #f6e2b8;
            padding: 20px;
            text-align: center;
        }

        header img {
            width: 200px;
        }

        main {
            padding: 20px;
            text-align: center;
        }

        form {
            margin: 0 auto;
            width: 50%;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 5px;
        }

        form select,
        form input[type="text"],
        form input[type="number"] {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }

        form input[type="submit"] {
            background-color: #422812;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 50%;
            text-align: center;
        }

        .modal-button {
            background-color: #422812;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<header>
    <a href="index.html"><img src="../static/img/Quickbook_logo.png" alt="QuickBook Logo"></a>
    <h1>Delete Hotel</h1>
</header>

<main>
    <form id="deleteHotelForm">
        <label for="searchOption">Search Option:</label>
        <select id="searchOption" name="searchOption">
            <option value="hotelName">Hotel Name</option>
            <option value="hotelId">Hotel ID</option>
        </select><br>

        <label for="searchTerm">Enter Search Term:</label>
        <input type="text" id="searchTerm" name="searchTerm" required><br>

        <input type="submit" value="Delete Hotel">
    </form>
</main>

<!-- Modal for confirmation -->
<div id="confirmationModal" class="modal">
    <div class="modal-content">
        <h2>Are you sure you want to delete this hotel?</h2>
        <button id="deleteButton" class="modal-button">Delete</button>
        <button id="cancelButton" class="modal-button">Cancel</button>
    </div>
</div>

<script>

    document.addEventListener('DOMContentLoaded', function () {
        const deleteForm = document.getElementById('deleteHotelForm');
        const confirmationModal = document.getElementById('confirmationModal');
        const deleteButton = document.getElementById('deleteButton');
        const cancelButton = document.getElementById('cancelButton');
        const searchTermInput = document.getElementById('searchTerm');
        const searchOptionSelect = document.getElementById('searchOption');

        deleteForm.addEventListener('submit', function (event) {
            event.preventDefault();
            confirmationModal.style.display = 'block';
        });

        cancelButton.addEventListener('click', function () {
            confirmationModal.style.display = 'none';
        });

        deleteButton.addEventListener('click', function () {
            confirmationModal.style.display = 'none';
            deleteHotel();
        });

        function deleteHotel() {
            const searchTerm = searchTermInput.value;
            const searchOption = searchOptionSelect.value;
            let url = '';

            if (searchOption === 'hotelId') {
                url = `http://localhost:8080/hotels/delete/${searchTerm}`;
            } else if (searchOption === 'hotelName') {
                alert('Sletning efter hotelnavn er ikke understÃ¸ttet');
                return;
            }

            fetch(url, {
                method: 'DELETE'
            })
                .then(response => {
                    if (response.ok) {
                        return response.text();
                    }
                    throw new Error('Noget gik galt med sletningen');
                })
                .then(() => {
                    alert('Hotellet blev slettet');
                    searchTermInput.value = '';
                })
                .catch(error => {
                    alert(error.message);
                });
        }
    });



</script>
</body>
</html>
